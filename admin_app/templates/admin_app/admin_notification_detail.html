{% extends "admin_app/layout-admin.html" %}
{% load static %}

{% block title %}Kaidoki Desse ç®¡ç† | é€šçŸ¥è©³ç´°{% endblock %}

{% block admin_content %}
<div class="container-fluid py-4" style="min-height: 80vh;">
  <h2 class="fw-bold mb-4 text-dark">é€šçŸ¥è©³ç´°</h2>

  <!-- ğŸ”¹ ä¸Šéƒ¨ï¼šé€šçŸ¥ã®è©³ç´°æƒ…å ± -->
  <div class="card shadow-sm mb-4" style="height: 60vh; overflow-y: auto;">
    <div class="card-body">
      <div class="row mb-2">
        <div class="col-md-6">
          <strong>ID</strong><br>
          {{ log.id }}
        </div>
        <div class="col-md-6">
          <strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</strong><br>
          {{ log.user.username|default:"-" }}
        </div>
      </div>

      <div class="row mb-2">
        <div class="col-md-6">
          <strong>å•†å“å</strong><br>
          {{ log.product.product_name|default:"-" }}
        </div>
        <div class="col-md-6">
          <strong>ã‚·ãƒ§ãƒƒãƒ—å</strong><br>
          {{ log.product.shop_name|default:"-" }}
        </div>
      </div>

      <div class="row mb-2">
        <div class="col-md-6">
          <strong>é€šçŸ¥æ–¹æ³•</strong><br>
          {% if log.event_type|slice:":5" == "mail_" %}
            <span class="badge text-dark rounded-0 px-2 py-1"style="background:#8f8d67;">ãƒ¡ãƒ¼ãƒ«</span>
          {% else %}
            <span class="badge text-white rounded-0 px-2 py-1" style="background:#67688f;">ã‚¢ãƒ—ãƒª</span>
          {% endif %}
        </div>
        <div class="col-md-6">
          <strong>é€šçŸ¥ç¨®åˆ¥</strong><br>
          {% if log.event_type == "stock_restore" %}
            åœ¨åº«å¾©æ´»é€šçŸ¥
          {% elif log.event_type == "stock_few" %}
            åœ¨åº«å°‘é€šçŸ¥
          {% elif log.event_type == "threshold_hit" %}
            è²·ã„æ™‚ä¾¡æ ¼ã‚’ä¸‹å›ã‚‹ä¾¡æ ¼æ¤œçŸ¥
          {% elif log.event_type == "lowest_price" %}
            éå»æœ€å®‰å€¤ã‚’æ›´æ–°
          {% elif log.event_type == "discount_over" %}
            æŒ‡å®šå‰²å¼•ç‡ã‚’ä¸‹å›ã‚‹ä¾¡æ ¼æ¤œçŸ¥
          {% elif log.event_type == "mail_buy_timing" %}
            ãƒ¡ãƒ¼ãƒ«ï¼šè²·ã„æ™‚ãŠçŸ¥ã‚‰ã›
          {% elif log.event_type == "mail_stock" %}
            ãƒ¡ãƒ¼ãƒ«ï¼šåœ¨åº«ãŠçŸ¥ã‚‰ã›
          {% else %}
            -
          {% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong>ç™ºç”Ÿæ—¥æ™‚</strong><br>
          {{ log.occurred_at|date:"Y/m/d H:i" }}
        </div>
        <div class="col-md-6">
          <strong>æ—¢èª­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</strong><br>
          {% if log.is_read %}
            <span class="badge border border-dark text-dark rounded-0 bg-white">æ—¢èª­</span>
          {% else %}
            <span class="badge bg-dark rounded-0 text-white">æœªèª­</span>
          {% endif %}
        </div>
      </div>

      <div>
        <strong>å†…å®¹</strong><br>
            <pre class="p-3 bg-light border rounded" style="white-space: pre-wrap; max-height: 300px; overflow-y: auto;">
            {{ log.message|default:"-" }}
            </pre>

      </div>
    </div>
  </div>

  <!-- ğŸ”¹ ä¸‹éƒ¨ï¼šæˆ»ã‚‹ãƒœã‚¿ãƒ³ã®ã¿ï¼ˆé–²è¦§å°‚ç”¨ï¼‰ -->
  <div class="d-flex justify-content-between mt-3">
    <a href="{% url 'admin_app:admin_notifications' %}"
       class="btn text-white px-4"
       style="background-color:#6c757d;">
      æˆ»ã‚‹
    </a>
    <div></div>  {# å³å´ã¯å°†æ¥æ‹¡å¼µç”¨ã«ç©ºã‘ã¦ãŠã #}
  </div>
</div>
{% endblock %}
